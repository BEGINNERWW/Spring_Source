<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- namespace="com.spring.mapper.MemberMapper는 MemberMapper인퍼페이스(MemberMapper.class)의 이름을 사용한다. -->
<mapper namespace="com.project.mapper.MemberMapper">

<!-- id는 Mapper.java(여기선 MemberMapper.java)에 동일하게 사용해야된다 -->
<!-- 
일반회원
email / pw/ name/nick/phone/local/img/grade

사업자 
biz_email / biz_no / biz_com/ biz_name / biz_add / biz_img / free_coupon/ pay_coupon
 -->
<!-- 회원정보조회 -->
<select id="selectMember" parameterType="String" resultType="MemberVO">
	select * from member_list where email = #{email}
</select>

<select id="getMemberlist" resultType="MemberVO">
	select * from member_list order by email
</select>

<!-- 회원정보수정 -->
<update id = "updateMember" parameterType="MemberVO">
	update member_list set pw=#{pw},nick=#{nick},phone=#{phone},local=#{local} where email= #{email}
</update>

<update id = "updateBiz_Member" parameterType="Biz_memberVO">
	update member_list set pw=#{pw},nick=#{nick},phone=#{phone},local=#{local} where biz_email= #{biz_email}
</update>

<!-- 패스워드변경 -->
<update id = "pwUpdate_M" parameterType="MemberVO">
	update member_list set pw=#{pw} where email= #{email}
</update>

<update id = "pwUpdate_BM" parameterType="Biz_memberVO">
	update member_list set pw=#{pw} where biz_email= #{biz_email}
</update>

<!-- 판매허가인증 확인 -->
<select id ="check_auth" parameterType="Biz_memberVO" resultType="String">
 	select biz_name from fulldata_animal where auth_no=#{biz_no} and status_no = 01
</select>

<!-- 사업자회원 추가(상태대기) -->
<insert id ="pre_insertBiz" parameterType="Biz_memberVO">
 	insert into biz_member(biz_email, biz_no, biz_com, biz_name, biz_add, biz_img)
 	values(#{biz_email},#{biz_no}, #{biz_com}, #{biz_name}, #{biz_add}, #{biz_img})
</insert>

<!-- 사업자회원 조회(이메일) -->
<select id="selectBizMember" parameterType="String" resultType="Biz_memberVO">
	select * from biz_member where biz_email = #{biz_email}
</select>

<!-- 사업자회원 등록확인(관리번호) -->
<select id="selectBiz_no" parameterType="String" resultType="int">
	select count(*) from biz_member where biz_no = #{biz_no}
</select>

<!-- 사업자회원 내가 작성한 분양글 -->
<select id="getMyAdopt" parameterType="String" resultType="Adopt_BoardVO">
	select adopt_title, adopt_date, adopt_readcount from adopt_list where adopt_nick = #{adopt_nick} order by adopt_date desc
</select>

<!-- 사업자회원 내가 작성한 글에 달린 댓글수 -->
<select id="getMyAdoptReply" parameterType="String" resultType="int">
	select count(*) from adopt_reply where adopt_no = #{adopt_no}
</select>

</mapper>